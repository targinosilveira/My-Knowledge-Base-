My Knowledge Base 


[[Business]]

//Empresa com serviços e gerenciamentos iguais aos da Millennium IT & Dev Corporation.

Corporation http://www.frontrange.com/

[[java]]

Instalando o JDK6 no Debian 5.0

sudo apt-get install sun-java6-jdk

tags: java debian debian5.0 jdk jdk6


Installing Java-Sun-JDK 6 on Debian Squeeze.
vim /etc/apt/sources.list 

# squeeze update to install java-sun-jdk6
deb http://ftp.br.debian.org/debian/ squeeze main non-free
deb-src http://ftp.br.debian.org/debian/ squeeze main non-free 

sudo apt-get update
sudo apt-get install sun-java6-jdk

tags: java debian debian6.0 jdk jdk6


[[Postgres]]


Instalando o Postgres 8.3 

apt-get install postgresql-8.3 postgresql-client-8.3 postgresql-contrib-8.3 postgresql-8.3-postgis

tags: postgres 


Instalando o Postgis para o Postgres 8.3 

apt-get install postgresql-8.3-postgis


Criando o cluster postgres quando a instalação não consegue fazer

pg_createcluster 8.3 main --start

tags postgres instalação


Alterar a memoria compartilhada do linux para aumentar a quantidade de conexões


Instalando o Postgresql9.1 no Debian Sqeeze 

#update to install postgres 9.1
## Postgres 9 hasn't been backported yet.  Manually added repos.
deb http://ppa.launchpad.net/pitti/postgresql/ubuntu lucid main
deb-src http://ppa.launchpad.net/pitti/postgresql/ubuntu lucid main

sudo apt-get update 

sudo apt-get install postgresql-9.1 libpq-dev

tags: postgres9.1 sqeeze 

sudo sysctl -w kernel.shmmax=629145600
sudo sysctl -w kernel.shmmax=15728640000
sudo sysctl -w kernel.shmall=6177438

//Calculo a quantidade de memoria em MBx1024x1024=bytes
//600*1024*1024=629145600
//15000*1024*1024=15728640000
//Editar o arquivo sudo vim /etc/sysctl.conf -- adicionar kernel.shmmax=629145600 para reiniciar o sistema.
//Editar o arquivo sudo vim /etc/sysctl.conf -- adicionar kernel.shmmax=629145600 para reiniciar o sistema.

tags:linux mamoria compartilhada postgres max_conections


Data Atual SEM “Time Zone”
//Retorna a data atual formatada por data e hora com minutos e segundos.
select LOCALTIMESTAMP (0)

Tags: current_time postgres data hora

Select para saber a versão do postgres  

SELECT version();

tags: postgres versão


Select para contar a quantidade de veículos que transmitiram durante um periodo de tempo.

select count(*) from (select distinct(vehicle_vehicleid) from metric where metrictimestamp between '2011-12-19 00:00:00.000' and '2011-12-19 23:59:59.999') as count;

tags: select transmissões count


Select para listar base de dados e tablespaces 

SELECT d.datname as "Name",
       r.rolname as "Owner",
       pg_catalog.pg_encoding_to_char(d.encoding) as "Encoding",
       pg_catalog.shobj_description(d.oid, 'pg_database') as "Description",
       t.spcname as "Tablespace"
FROM pg_catalog.pg_database d
  JOIN pg_catalog.pg_roles r ON d.datdba = r.oid
  JOIN pg_catalog.pg_tablespace t on d.dattablespace = t.oid
ORDER BY 1;

tags: tablespace database


Select para verificar o tamanho das tabelas de um banco

SELECT esquema, tabela,
       pg_size_pretty(pg_relation_size(esq_tab)) AS tamanho,
       pg_size_pretty(pg_total_relation_size(esq_tab)) AS tamanho_total
  FROM (SELECT tablename AS tabela,
               schemaname AS esquema,
               schemaname||'.'||tablename AS esq_tab
          FROM pg_catalog.pg_tables
         WHERE schemaname NOT
            IN ('pg_catalog', 'information_schema', 'pg_toast') ) AS x
 ORDER BY pg_total_relation_size(esq_tab) DESC;

tags: tabelas postgres

Querie para varificar a existencia de registros duplicados.

SELECT vehicleid, 
COUNT(vehicleid) AS numero_de_ocorrencias
FROM vehicle
GROUP BY vehicleid
HAVING ( COUNT(vehicleid) > 1 )

tags: registros duplicados

Desabilita as constraints em uma transação

SET CONSTRAINTS ALL DEFERRED;

tags: constraints desabilitar 


Alterar a senha do usuário postgres
precisa estar logado como root no postgres e entrar psql
ALTER USER postgres WITH PASSWORD 'novasenha'

tags: postgres alterarsenha


Listar a estrutura de uma tabela.

\d nome_da_tabela

tags: postgres estrutura de tabela


Ativa o timing de execução de consultas no psql do postgres

\timing 

tags: postgres time timing


Criar tablespace

CREATE TABLESPACE yats LOCATION '/opt/m2m/tablespace';

//Query que exemplifica como criar uma  tablespace no Postgres

tags: postgres tablespaces tablespace


Select para listar tablespaces com seus dono e caminhos no sistema operacional.

SELECT T.oid, T.spcname, T.spclocation, U.usename
FROM pg_tablespace T, pg_user U
WHERE T.spcowner = U.usesysid;

tags: postgres tablespace listar tablespaces


Criar banco com base em um já existente.

CREATE DATABASE m2m_frota_eog_db 
OWNER postgres 
TABLESPACE pgdata1 
TEMPLATE m2m_frota_eog_old_db
ENCODING = 'UTF8';

CREATE DATABASE m2m_frota_eog_teste_db
WITH OWNER = "postgres"
     ENCODING = 'UTF-8';

tags: postgres create database template


Exportar tabelas ou consultas para TXT ou CSV
\COPY (select * from metric limit 3) TO '/caminho_do_arquivo_a_ser_gerado.csv' WITH DELIMITER ';' NULL 'null' CSV  HEADER

tags: postgres exportação CSV 

Alterar nome de uma banco de dados

ALTER DATABASE m2m_frota_eog_teste_db  RENAME TO m2m_frota_eog_db;

tags: database alter


Link de tutorial que ensina como alterar dados de tablespace para banco, tabelas e indices

http://keniamilene.wordpress.com/2008/03/14/alterando-tablespace-de-tabelas-e-indices-no-postgresql/



[[MySql]]

Dar permissões de usuários no MySql.

grant all privileges on somedb.* to targino@"%" identified by '123456';

tags: permissões mysql


[[Rede]]

Linha de comando usada para pegar os dados que chegam em uma determinadas porta.
gravar num arquivo para ser analisado via wireshark.

sudo tcpdump -s 10000 -v -X -i eth0 port 7701 -c 5000 -w targino.log

tags: tcpdump wireshark


Comando para configurar interface virtual numa interface de rede.

ifconfig eth0:0 50.30.39.11 netmask 255.255.255.0 up

tags: rede interface virtual


[[Linux]]


Verificação de MPT RAID

lspci | grep -i mpt # will tell you if the RAID controller is an MPT RAID controller or not. If it is, 
apt-get install mpt-status # will install the RAID status package.
mpt-status --autoload # will load the mptctl module and execute mpt-status.

tags RAID MPT

Configurando proxy no Linux via linha de comando

export http_proxy="http://usuario:senha@ip:porta"

tags: linux proxy shell


Correção do erro de locales do perl no linux.

perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
	LANGUAGE = "en_US:en",
	LC_ALL = "pt_BR.UTF-8",
	LC_MESSAGES = "en_US.UTF-8",
	LANG = "en_US.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to the standard locale ("C").

export LANGUAGE=en_US.UTF-8
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8
sudo dpkg-reconfigure locales

tags: perl locales

Usando abas no vim

:help tabpage 

tags: vim abas vi


Localizar processo pela porta

lsof -w -n -i tcp:8080

Tags: processo porta kill

Enviando e-mail através do shell script
echo "Enviando e-mail via shell script...." | mail -s "Targino eh o cara" targino_silveira@yahoo.com.br

tags: shell script email


Criando uma chave publica para um computador/servidor

ssh-keygen -t dsa

tags: ssh chave publica acesso remoto


Copiando uma chave publica de um computador/servidor para outro.

ssh-copy-id -i ~/.ssh/id_dsa.pub unidentalbk@67.205.57.126

tags: ssh chave publica acesso remoto 

Fazer bootable.
Fazer com transformar uma partição bootlable.

fdisk /dev/sdb
opção a <enter>
opção w <enter>

tags: linux partição

Criar partições em discos.

fdisk /dev/sdb--o dispositivo
opção n <enter>
opção w <enter>

tags: linux partição


Formata uma partição com o tipo de file system ext3

sudo mkfs -t ext3 -L pgdata1 -v /dev/sdc1

tags: linux partição formatar formatação

Executa comando com sudo sem digitar senha do usuário
//Edite o arquivo sudores e ponha a opção NOPASSWORD
usuario ALL=NOPASSWD:ALL

Tags: linux sudo root


Bloqueando e desbloqueando usuários no Linux.

usermod -L usuário  #desbloqueia o usuário

usermod -L usuário  #bloqueia o usuário

tags: usuario bloquear

Montando uma partição 

sudo mount -t tipo /dev/dispositivo -rw /diretorio_para_sermontado

tags: linux partição ext3


Montando os diretorios "/proc" "/dev" "pts"

mount -t proc none /chroot/proc
mount -o bind /dev /chroot/dev
mount -o bind /dev/pts /chroot/dev/pts

tags mountar direotorios 

Desmontando uma partição 

sudo umount /dev/dispositivo

tags: linux partição ext3


Alterando o timezone 

dpkg-reconfigure tzdata


Usando o comando cut para cortar pedaços desejados do texto.
$ echo 'aaa:bbb:ccc' | cut -f1 -d':'
aaa

tags: linux grep cut recortar
	
Deletando arquivo com quantidade mais antigos

find /path/to/files* -mtime +5 -exec rm {} \;

tags: linux arquivos deletar
	
	
Montando partição pelo fstab

# <file system> <mount point>   <type>  <options>       <dump>  <pass>
/dev/sdc1       /pgdata2        ext3    defaults        0       0

tags: linux partição ext3 fstab

sudo vim /etc/timezone

America/Fortaleza

export TZ=America/Fortaleza


Deletando arquivos através de busca pelo find.

rm -rf `find . -type d -name .svn`

tags: linux deletar find


Como alterar a data e hora do Sistema Operacional

sudo date -s "05/13/2011 20:07"

tags: data linux

Descompactar um arquivo do tipo tar.gz

tar -vzxf nomedoarquivo.tar.gz

tags: tar.gz descompactar

Artigo que ensina como verificar a performace de um servidor

http://www.vivaolinux.com.br/artigo/Bottlenecks-Metricas-de-performance-de-servidores?pagina=1

tags: linux performace servidor


Criando um arquivo de tamanho desejado com o DD

dd if=/dev/zero of=/tmp/arquivo.img bs=1M count=100


if=origem (/dev/zero)
of=um_destino_qualquer
bs= tamanho do bloco em Bytes (abreviações Mega,Giga)
count= copia N vezes bs para o arquivo

tags: dd criacao de arquivos 


[[Debina]]

[[[Lenny]]]

Lista de fontes para instalação e atualização de programas.

###### Debian Main Repos
deb http://ftp.br.debian.org/debian/ lenny main contrib non-free
deb-src http://ftp.br.debian.org/debian/ lenny main contrib non-free

###### Debian Update Repos
deb http://security.debian.org/ lenny/updates main contrib non-free
deb http://ftp.br.debian.org/debian/ lenny-proposed-updates main contrib non-free
deb-src http://security.debian.org/ lenny/updates main contrib non-free
deb-src http://ftp.br.debian.org/debian/ lenny-proposed-updates main contrib non-free

Logo em seguida intalar o pacote 

 apt-get install build-essential

tags: debian lenny source lists




[[M2MFrotaWeb]]
Link das camera da J Jardim.
http://jjardim.no-ip.org:8080/showip/?Empresa=Alpha&Carro=027

tags: m2m cameras


Link para cadastros de paineis do M2M Frota Web.
http://173.224.120.20:8802/forecast/pages/panel05/index.html?panel=panel05&locale=pt_BR&panelId=

tags: m2m paineis previsão

[[Links e Sites]]

//Otimo tutorial que apresenta o uso de uma biblioteca de SSH para Ruby.
http://johanharjono.com/archives/602

tags: ruby ssh


[[Ruby]]

Instalando o Ruby e sua principais bibliotecas no linux Debian.

sudo apt-get install ruby irb rdoc libopenssl-ruby build-essential ruby1.8-dev libpq-dev

tags: ruby debian5.0


Instalando o RubyGem no Debian 5.0

wget http://production.cf.rubygems.org/rubygems/rubygems-1.8.10.tgz
tar -xzvf rubygems-1.8.10.tgz 
sudo ruby setup.rb
sudo ln -s /usr/bin/gem1.8 /usr/bin/gem 

tags: ruby rubygem


